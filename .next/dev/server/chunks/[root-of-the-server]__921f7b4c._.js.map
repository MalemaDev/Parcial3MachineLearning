{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/angel/Downloads/Parcialfinal/app/api/predict-knn/route.ts"],"sourcesContent":["// endpoint para K-Nearest Neighbors\n// busca los 5 vecinos más cercanos y devuelve la mayoría de clase\n\nimport { type NextRequest, NextResponse } from \"next/server\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    // obtengo los datos del cliente\n    const body = await request.json()\n\n    // predigo aleatoriamente para la demo\n    // en producción: calcularía distancias, buscaría los 5 más cercanos, etc\n    const prediction = Math.random() > 0.5 ? 1 : 0\n    const probability = Math.random()\n\n    // genero datos simulados de los 5 vecinos más cercanos\n    // en real: serían datos actuales del dataset de entrenamiento\n    const nearestNeighbors = [\n      { index: 1, class: 0 },\n      { index: 2, class: 1 },\n      { index: 3, class: 0 },\n      { index: 4, class: 0 },\n      { index: 5, class: 0 },\n    ]\n\n    // devuelvo los resultados\n    return NextResponse.json({\n      success: true,\n      prediction: prediction === 1 ? \"Sí\" : \"No\",\n      probability: probability.toFixed(4),\n      confidence: Math.abs(probability - 0.5) * 2,\n      nearestNeighbors: nearestNeighbors,\n      distance: (Math.random() * 0.5).toFixed(2),\n    })\n  } catch (error) {\n    // manejo de errores\n    console.error(\"Error en predicción KNN:\", error)\n    return NextResponse.json({ success: false, error: \"Error al procesar la predicción\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":"AAAA,oCAAoC;AACpC,kEAAkE;;;;;AAElE;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,gCAAgC;QAChC,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,sCAAsC;QACtC,yEAAyE;QACzE,MAAM,aAAa,KAAK,MAAM,KAAK,MAAM,IAAI;QAC7C,MAAM,cAAc,KAAK,MAAM;QAE/B,uDAAuD;QACvD,8DAA8D;QAC9D,MAAM,mBAAmB;YACvB;gBAAE,OAAO;gBAAG,OAAO;YAAE;YACrB;gBAAE,OAAO;gBAAG,OAAO;YAAE;YACrB;gBAAE,OAAO;gBAAG,OAAO;YAAE;YACrB;gBAAE,OAAO;gBAAG,OAAO;YAAE;YACrB;gBAAE,OAAO;gBAAG,OAAO;YAAE;SACtB;QAED,0BAA0B;QAC1B,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,YAAY,eAAe,IAAI,OAAO;YACtC,aAAa,YAAY,OAAO,CAAC;YACjC,YAAY,KAAK,GAAG,CAAC,cAAc,OAAO;YAC1C,kBAAkB;YAClB,UAAU,CAAC,KAAK,MAAM,KAAK,GAAG,EAAE,OAAO,CAAC;QAC1C;IACF,EAAE,OAAO,OAAO;QACd,oBAAoB;QACpB,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAkC,GAAG;YAAE,QAAQ;QAAI;IACvG;AACF"}}]
}